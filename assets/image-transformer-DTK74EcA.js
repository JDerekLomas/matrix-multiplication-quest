import{j as r}from"./index-IzgevGT8.js";import{r as g,R as w}from"./vendor-DJ1oPbzn.js";const T=({interaction:v})=>{const u=g.useRef(null),[o,h]=g.useState([]),[b,j]=g.useState(!0),N={rotate45:{type:"rotate",label:"Rotate 45°",matrix:[[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)],[Math.sin(Math.PI/4),Math.cos(Math.PI/4)]],color:"blue"},rotate90:{type:"rotate",label:"Rotate 90°",matrix:[[0,-1],[1,0]],color:"blue"},scale2x:{type:"scale",label:"Scale 2×",matrix:[[2,0],[0,2]],color:"green"},scaleHalf:{type:"scale",label:"Scale 0.5×",matrix:[[.5,0],[0,.5]],color:"green"},stretchX:{type:"scale",label:"Stretch X",matrix:[[1.5,0],[0,1]],color:"green"},stretchY:{type:"scale",label:"Stretch Y",matrix:[[1,0],[0,1.5]],color:"green"},shearRight:{type:"shear",label:"Shear →",matrix:[[1,.5],[0,1]],color:"purple"},shearUp:{type:"shear",label:"Shear ↑",matrix:[[1,0],[.5,1]],color:"purple"},flipX:{type:"flip",label:"Flip X",matrix:[[-1,0],[0,1]],color:"orange"},flipY:{type:"flip",label:"Flip Y",matrix:[[1,0],[0,-1]],color:"orange"}},y=(t,e)=>[[t[0][0]*e[0][0]+t[0][1]*e[1][0],t[0][0]*e[0][1]+t[0][1]*e[1][1]],[t[1][0]*e[0][0]+t[1][1]*e[1][0],t[1][0]*e[0][1]+t[1][1]*e[1][1]]],n=g.useCallback(()=>o.length===0?[[1,0],[0,1]]:o.reduce((t,e)=>y(e.matrix,t),[[1,0],[0,1]]),[o])(),m=g.useCallback((t,e,s,a,x)=>{t.save(),t.globalAlpha=x;const l=a/8,c={body:"#4F46E5",accent:"#818CF8",eyes:"#FFFFFF",pupils:"#1E1B4B"};t.fillStyle=c.body,t.fillRect(e-a/2+l,s-a/2+l*2,a-l*2,a-l*3),t.fillRect(e-a/2+l*2,s-a/2,a-l*4,l*2),t.fillStyle=c.accent,t.fillRect(e-l/2,s-a/2-l,l,l),t.fillStyle=c.eyes,t.fillRect(e-a/2+l*2,s-a/2+l*3,l*1.5,l*1.5),t.fillRect(e+a/2-l*3.5,s-a/2+l*3,l*1.5,l*1.5),t.fillStyle=c.pupils,t.fillRect(e-a/2+l*2.5,s-a/2+l*3.5,l*.5,l*.5),t.fillRect(e+a/2-l*3,s-a/2+l*3.5,l*.5,l*.5),t.fillStyle=c.accent,t.fillRect(e-a/4,s-a/2+l*5,a/2,l),t.fillStyle=c.body,t.fillRect(e-a/2-l,s-a/2+l*4,l,l*2),t.fillRect(e+a/2,s-a/2+l*4,l,l*2),t.fillRect(e-a/2+l*2,s+a/2-l,l*1.5,l*2),t.fillRect(e+a/2-l*3.5,s+a/2-l,l*1.5,l*2),t.restore()},[]);g.useEffect(()=>{const t=u.current;if(!t)return;const e=t.getContext("2d");if(!e)return;const s=t.width,a=t.height,x=s/2,l=a/2;e.fillStyle="#f8fafc",e.fillRect(0,0,s,a),e.strokeStyle="#e2e8f0",e.lineWidth=1;for(let d=0;d<=s;d+=30)e.beginPath(),e.moveTo(d,0),e.lineTo(d,a),e.stroke(),e.beginPath(),e.moveTo(0,d),e.lineTo(s,d),e.stroke();e.strokeStyle="#94a3b8",e.lineWidth=2,e.beginPath(),e.moveTo(x,0),e.lineTo(x,a),e.moveTo(0,l),e.lineTo(s,l),e.stroke();const c=60;m(e,x,l,c,.2),e.save(),e.translate(x,l),e.transform(n[0][0],n[1][0],n[0][1],n[1][1],0,0),e.translate(-x,-l),m(e,x,l,c,1),e.restore()},[n,m]);const i=t=>{h([...o,{...N[t]}])},S=t=>{h(o.filter((e,s)=>s!==t))},C=()=>h([]),R=()=>{o.length>0&&h(o.slice(0,-1))},f=t=>`[${t[0][0].toFixed(2)}, ${t[0][1].toFixed(2)}]
[${t[1][0].toFixed(2)}, ${t[1][1].toFixed(2)}]`,p=t=>{const e={blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-600",btn:"bg-blue-100 text-blue-700 hover:bg-blue-200"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-600",btn:"bg-green-100 text-green-700 hover:bg-green-200"},purple:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-600",btn:"bg-purple-100 text-purple-700 hover:bg-purple-200"},orange:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-600",btn:"bg-orange-100 text-orange-700 hover:bg-orange-200"}};return e[t]||e.blue};return r.jsxs("div",{className:"p-3 bg-white rounded-xl shadow-sm text-sm",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("canvas",{ref:u,width:210,height:210,className:"w-full max-w-[210px] mx-auto border border-gray-200 rounded-lg","aria-label":v.ariaLabel})}),r.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Rotation"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsx("button",{onClick:()=>i("rotate45"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Rotate 45°"}),r.jsx("button",{onClick:()=>i("rotate90"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Rotate 90°"})]}),r.jsx("div",{className:"text-xs font-semibold text-gray-500 mt-2",children:"Scale"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsx("button",{onClick:()=>i("scale2x"),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Scale 2×"}),r.jsx("button",{onClick:()=>i("scaleHalf"),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Scale 0.5×"}),r.jsx("button",{onClick:()=>i("stretchX"),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Stretch X"}),r.jsx("button",{onClick:()=>i("stretchY"),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Stretch Y"})]}),r.jsx("div",{className:"text-xs font-semibold text-gray-500 mt-2",children:"Shear"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsx("button",{onClick:()=>i("shearRight"),className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"Shear →"}),r.jsx("button",{onClick:()=>i("shearUp"),className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"Shear ↑"})]}),r.jsx("div",{className:"text-xs font-semibold text-gray-500 mt-2",children:"Flip"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.jsx("button",{onClick:()=>i("flipX"),className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded hover:bg-orange-200",children:"Flip X"}),r.jsx("button",{onClick:()=>i("flipY"),className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded hover:bg-orange-200",children:"Flip Y"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-1",children:[r.jsx("button",{onClick:R,disabled:o.length===0,className:"flex-1 py-1 px-2 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50",children:"Undo"}),r.jsx("button",{onClick:C,disabled:o.length===0,className:"flex-1 py-1 px-2 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:opacity-50",children:"Clear All"})]})]})]}),o.length>0&&r.jsxs("div",{className:"mt-3 p-2 bg-indigo-50 rounded-lg",children:[r.jsx("div",{className:"flex items-center justify-between mb-1",children:r.jsxs("span",{className:"text-xs font-semibold text-indigo-700",children:["Transform Chain (",o.length,")"]})}),r.jsx("div",{className:"flex flex-wrap gap-1",children:o.map((t,e)=>r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs border ${p(t.color).bg} ${p(t.color).border}`,children:[r.jsx("span",{className:p(t.color).text,children:t.label}),r.jsx("button",{onClick:()=>S(e),className:"text-gray-400 hover:text-red-500",children:"×"})]},e))})]}),o.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("button",{onClick:()=>j(!b),className:"text-xs text-indigo-600 hover:text-indigo-800 mb-1",children:b?"▼ Hide Math":"▶ Show Math"}),b&&r.jsx("div",{className:"p-2 bg-gray-50 rounded-lg overflow-x-auto",children:r.jsxs("div",{className:"flex items-center gap-1 flex-wrap font-mono text-xs",children:[o.map((t,e)=>r.jsxs(w.Fragment,{children:[r.jsxs("div",{className:`p-1 rounded border ${p(t.color).bg} ${p(t.color).border}`,children:[r.jsx("div",{className:"text-center text-[10px] text-gray-500 mb-0.5",children:t.label}),r.jsx("div",{className:"whitespace-pre text-[11px]",children:f(t.matrix)})]}),e<o.length-1&&r.jsx("span",{className:"text-gray-400 px-0.5",children:"×"})]},e)),r.jsx("span",{className:"text-gray-400 px-0.5",children:"="}),r.jsxs("div",{className:"p-1 rounded border bg-indigo-100 border-indigo-300",children:[r.jsx("div",{className:"text-center text-[10px] text-gray-500 mb-0.5",children:"Result"}),r.jsx("div",{className:"whitespace-pre text-[11px] font-semibold text-indigo-700",children:f(n)})]})]})})]}),r.jsx("div",{className:"mt-2 p-2 bg-gray-100 rounded-lg",children:r.jsxs("div",{className:"text-xs text-gray-600 text-center",children:[r.jsx("span",{className:"font-semibold",children:"Final Matrix:"})," ",r.jsxs("span",{className:"font-mono",children:["[",n[0][0].toFixed(2),", ",n[0][1].toFixed(2),"] [",n[1][0].toFixed(2),", ",n[1][1].toFixed(2),"]"]})]})})]})};export{T as default};
