const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-IzgevGT8.js","./vendor-DJ1oPbzn.js","./index-CeREGqCE.css"])))=>i.map(i=>d[i]);
import{j as e,u as b,Q as A,C,_,L as y}from"./index-IzgevGT8.js";import{r as u}from"./vendor-DJ1oPbzn.js";const c={SECONDS_IN_MINUTE:60,MINUTES_IN_HOUR:60,HOURS_IN_DAY:24,DAYS_IN_MONTH:30,MILLISECONDS_IN_SECOND:1e3},w={NEW:48,UPDATED:48};function E(){return new Date}function p(t){return!isNaN(t.getTime())}function f(t,s){return`${t} ${s}${t!==1?"s":""} ago`}function L(t){if(!t)return;const s=new Date(t),n=E();if(!p(s))return;const r=Math.floor((n.getTime()-s.getTime())/c.MILLISECONDS_IN_SECOND);if(r<0||r<c.SECONDS_IN_MINUTE)return"just now";const o=Math.floor(r/c.SECONDS_IN_MINUTE);if(o<c.MINUTES_IN_HOUR)return f(o,"minute");const a=Math.floor(o/c.MINUTES_IN_HOUR);if(a<c.HOURS_IN_DAY)return f(a,"hour");const i=Math.floor(a/c.HOURS_IN_DAY);if(i<c.DAYS_IN_MONTH)return f(i,"day");const d=Math.floor(i/c.DAYS_IN_MONTH);return f(d,"month")}function v(t,s){return(s.getTime()-t.getTime())/(c.MILLISECONDS_IN_SECOND*c.SECONDS_IN_MINUTE*c.MINUTES_IN_HOUR)}function T(t,s){if(!t||!s)return;const n=new Date(t),r=new Date(s),o=E();if(!p(n)||!p(r))return;if(v(n,o)<=w.NEW)return"New";if(v(r,o)<=w.UPDATED)return"Updated"}const I=({questTimeStamp:t,showDetails:s})=>{var d;const n=(t==null?void 0:t.createdAt)||"",r=(t==null?void 0:t.updatedAt)||"",o=(d=t==null?void 0:t.latestCommitHash)==null?void 0:d.slice(0,7),a=T(n,r),i=L(r);return s?e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-auto",children:["Last Updated: ",i]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-auto flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:"Commit:"}),e.jsx("code",{className:"font-mono font-semibold bg-gray-100 text-gray-800 px-2 py-0.5 rounded-md",children:o})]})]}):a?e.jsx("span",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur-sm text-white text-xs font-bold px-3 py-1 rounded-full shadow-md",children:a}):null},H=u.memo(({id:t,title:s,subtitle:n,isDisabled:r,figmaLink:o,scormPackageUrl:a,demoLink:i,questTimeStamp:d})=>{const h=b("figma"),m=b("download");return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden w-[480px]
          ${r?"opacity-60 cursor-not-allowed":"hover:border-blue-100 hover:shadow-md transition-all duration-200"}`,children:[e.jsxs("div",{className:"relative",children:[r?e.jsx("div",{className:"w-full h-60 object-cover"}):e.jsx("img",{src:`${A}${t}/assets/backgrounds/bg1.webp`,alt:`${t} thumbnail`,className:"w-full h-60 object-cover"}),e.jsx(I,{questTimeStamp:d})]}),e.jsxs("div",{className:"p-6 flex flex-col h-[220px]",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:s}),o&&e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-gray-50 text-gray-500 transition-colors",title:"View Figma Project",children:e.jsx(h,{width:"18",height:"18",stroke:"currentColor",strokeWidth:"2"})})]}),e.jsx("p",{className:"text-m text-gray-600 mb-auto",children:n}),e.jsx(I,{questTimeStamp:d,showDetails:!0}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:`${i}?lang=en`,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 rounded-md text-white font-medium bg-blue-500 hover:bg-blue-600 transition-colors text-m
                            ${r?"pointer-events-none":""}`,children:"Start ►"}),e.jsx("a",{href:`${i}?lang=es`,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 rounded-md text-white font-medium bg-blue-500 hover:bg-blue-600 transition-colors text-m
                            ${r?"pointer-events-none":""}`,children:"Comenzar ►"})]}),a&&e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 rounded-md text-gray-600 text-m font-medium hover:bg-gray-50 border border-gray-200 flex items-center gap-2
                            ${r?"pointer-events-none":""}`,children:[e.jsx(m,{width:"14",height:"14",stroke:"currentColor",strokeWidth:"2"}),e.jsx("span",{children:"SCORM"})]})]})]})]},t)}),k=t=>[...t].sort((s,n)=>Number(s.isDisabled)-Number(n.isDisabled)),$=()=>{const[t,s]=u.useState([]),[n,r]=u.useState({}),[o,a]=u.useState("Algebra1"),[i,d]=u.useState(!0),[h,m]=u.useState(null),S=b("resources"),D=["Algebra1","Algebra2","Geometry","Math 2"];if(u.useEffect(()=>{(async()=>{d(!0),m(null);try{const x=await _(()=>import("../src/GAME_DATA/launcher/quests.json"),[],import.meta.url);try{const g=window.location.hostname,N=await fetch(`https://${g}/${y}`);r(await N.json())}catch(g){console.error("Error fetching from dynamic domain, using fallback:",g);const{DOMAIN:N}=await _(async()=>{const{DOMAIN:U}=await import("./index-IzgevGT8.js").then(O=>O.c);return{DOMAIN:U}},__vite__mapDeps([0,1,2]),import.meta.url),M=await fetch(`https://${N}/${y}`);r(await M.json())}s(x.default)}catch(x){m("Failed to load quests. Please try again later."),console.error("Error loading quests:",x)}finally{d(!1)}})()},[]),i)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading quests..."})});if(h)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-red-500",children:h})});const j=k(t).filter(l=>l.section===o);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sticky top-0 z-10 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{htmlFor:"program-select",className:"text-gray-700 font-medium",children:"Program"}),e.jsx("div",{className:"flex space-x-2",children:D.map(l=>e.jsx("button",{onClick:()=>a(l),className:`px-2 py-2 rounded-lg border transition-all
        ${o===l?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100"} focus:outline-none focus:ring-2 focus:ring-blue-500`,children:l},l))})]}),e.jsxs("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center px-4 py-2 rounded-lg text-gray-700 bg-gray-50 
            hover:bg-gray-100 transition-colors border border-gray-200 gap-2`,children:[e.jsx(S,{width:"16",height:"16",stroke:"currentColor",strokeWidth:"2"}),e.jsx("span",{children:"Resources"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:j.length>0?j.map(l=>{var x;return e.jsx(H,{...l,questTimeStamp:{...n[l.id],latestCommitHash:((x=n[l.id])==null?void 0:x.latestCommitHash)||void 0}},l.id)}):e.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-16",children:e.jsxs("div",{className:"text-gray-500 text-center",children:[e.jsx("p",{className:"text-lg font-medium mb-2",children:"No quests available"}),e.jsx("p",{className:"text-m",children:"Please select a different section or check back later."})]})})})})})]})},F=()=>e.jsxs("div",{className:"h-screen w-full bg-[#F1F5F9] flex flex-col",children:[e.jsx("header",{className:"w-full bg-white border-b border-gray-200 py-4 px-6",children:e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800",children:"Quests Hub"})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsx($,{})})})]});export{F as default};
