import{j as t}from"./index-BjpRIOmg.js";import{r as f}from"./vendor-DJ1oPbzn.js";const I=({interaction:b})=>{const v=f.useRef(null),[c,p]=f.useState(0),[g,w]=f.useState(1),[j,N]=f.useState(!1),y=b.showGrid??!0,S=b.allowRotation??!0,T=b.allowScaling??!0,d=Math.cos(c*Math.PI/180),x=Math.sin(c*Math.PI/180);f.useEffect(()=>{const l=v.current;if(!l)return;const e=l.getContext("2d");if(!e)return;const h=l.width,m=l.height,n=h/2,i=m/2;if(e.fillStyle="#f8fafc",e.fillRect(0,0,h,m),y){e.strokeStyle="#e2e8f0",e.lineWidth=1;for(let s=0;s<=h;s+=30)e.beginPath(),e.moveTo(s,0),e.lineTo(s,m),e.stroke();for(let s=0;s<=m;s+=30)e.beginPath(),e.moveTo(0,s),e.lineTo(h,s),e.stroke();e.strokeStyle="#94a3b8",e.lineWidth=2,e.beginPath(),e.moveTo(n,0),e.lineTo(n,m),e.moveTo(0,i),e.lineTo(h,i),e.stroke()}const a=60*g,r=[[-a,-a],[a,-a],[a,a],[-a,a]],o=r.map(([s,u])=>[s*d-u*x,s*x+u*d]);e.strokeStyle="#cbd5e1",e.fillStyle="rgba(203, 213, 225, 0.3)",e.lineWidth=2,e.setLineDash([5,5]),e.beginPath(),e.moveTo(n+r[0][0],i+r[0][1]);for(let s=1;s<r.length;s++)e.lineTo(n+r[s][0],i+r[s][1]);e.closePath(),e.fill(),e.stroke(),e.strokeStyle="#3b82f6",e.fillStyle="rgba(59, 130, 246, 0.3)",e.lineWidth=3,e.setLineDash([]),e.beginPath(),e.moveTo(n+o[0][0],i+o[0][1]);for(let s=1;s<o.length;s++)e.lineTo(n+o[s][0],i+o[s][1]);e.closePath(),e.fill(),e.stroke(),o.forEach(([s,u],P)=>{e.beginPath(),e.arc(n+s,i+u,6,0,Math.PI*2),e.fillStyle=P===0?"#ef4444":"#3b82f6",e.fill(),e.strokeStyle="#1e40af",e.lineWidth=2,e.stroke()})},[c,g,y,d,x]);const k=()=>{N(!0);let l=0;const e=setInterval(()=>{l+=5,p(l),l>=360&&(clearInterval(e),p(0),N(!1))},30)};return t.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx("canvas",{ref:v,width:300,height:300,className:"w-full max-w-[300px] mx-auto border border-gray-200 rounded-lg"})}),t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Transformation Matrix"}),t.jsxs("div",{className:"flex items-center justify-center font-mono text-lg",children:[t.jsx("span",{className:"text-2xl mr-1",children:"["}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"w-16 text-center text-blue-600",children:d.toFixed(2)}),t.jsx("span",{className:"w-16 text-center text-red-600",children:(-x).toFixed(2)})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"w-16 text-center text-red-600",children:x.toFixed(2)}),t.jsx("span",{className:"w-16 text-center text-blue-600",children:d.toFixed(2)})]})]}),t.jsx("span",{className:"text-2xl ml-1",children:"]"})]})]}),t.jsxs("div",{className:"space-y-3",children:[S&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rotation: ",c,"Â°"]}),t.jsx("input",{type:"range",min:"0",max:"360",value:c,onChange:l=>p(Number(l.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",disabled:j})]}),T&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Scale: ",g.toFixed(1),"x"]}),t.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:g,onChange:l=>w(Number(l.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),t.jsx("button",{onClick:k,disabled:j,className:"w-full py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 transition-colors",children:j?"Animating...":"Animate Full Rotation"})]})]})]}),t.jsxs("div",{className:"mt-3 text-center text-sm text-gray-500",children:["The ",t.jsx("span",{className:"text-gray-400",children:"dashed square"})," is the original shape. The ",t.jsx("span",{className:"text-blue-500",children:"blue square"})," shows the transformation result."]})]})};export{I as default};
